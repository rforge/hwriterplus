<!DOCTYPE html>
<html ><head>
<title>Example of a Document for Display in a Browser</title>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<link rel="stylesheet" type="text/css" href="../css/BrowserExample.css"></link>
</head>
<body><br/>
<center><span class = 'title'>
       Example of a Document for Display in a Browser</span></center><br/>
<center><span class = 'subtitle'>
       Dr David J Scott</span></center><br/>
<h1><a name="intro">Entering Text</a></h1><br/>
Ordinary paragraph text can be entering using
<font face = 'monospace' >hwrite</font>.
Aspects of the text such as the font family, face, size and colour can
be altered in line by using tags or styles.<br/>
<br/>
For example the font can be changed to sans-serif
<font face = 'Arial, sans-serif'> like this, </font>
italic <i> like this, </i> bold <b> like this,</b> coloured
<font color = 'blue'> like this,</font> or any combination of these
<b><i><font color = 'blue'>like this.</font></i></b><br/>
<br/>
Some text variations may not be rendered appropriately as can be
seen in the examples above. Classes can be defined in the
<span class = 'pkg'>.css</span> file
to deal with this problem.<br/>
<br/>
<h1>Incorporating Special Symbols</h1><br/>
Using appropriate tags and a list of symbols it is possible to
output mathematical and other symbols. Superscripts and subscripts are
also possible.<br/>
<br/>
Here are some Greek letters: &alpha;
&beta; and &Gamma;,
followed by some examples of superscripts and subscripts:
&alpha;<sup>2</sup> and &beta;<sub>n</sub>. As examples
of other symbols, here are some arrows:
&larr;  and &rArr;, some set symbols:
&exist;  and &cap;, and some operators:
&int;  and &prod;.<br/>
<br/>
More than one approach is
available to produce mathematical symbols.
Greek letters can be produced by using symbol font:
<font face='symbol, fantasy'>a, b, G</font>, although this may not
work in some browsers without the presence of additional fonts.
Codes can be used instead of \(\LaTeX\)-like names:
&#8592;, &#8747; and &#8719;<br/>
<br/>
Quotes can be incorporated by escaping with "\",
so for example we can obtain " and ' in the middle of some text.<br/>
<h1 id="mathematics">Rendering Mathematics</h1><br/>
Entering more complex mathematical expressions including
displayed mathematical expressions is difficult.
One approach is to insert
an image produced by other means, for example by \(\LaTeX\) or Word's
equation editor. The following expression was produced by Word's
equation editor then saved as a jpeg.<br/>
<br/>
<center><img border="0" src="DisplayedEquation.jpg" alt="DisplayedEquation.jpg"></img></center><br/>
To enable the rendering of complex mathematical expressions
using \(\LaTeX\) syntax, JavaScript is required, the JavaScript being
run when the file is loaded into the browser. The package
<span class = 'pkg'> R2HTML</span> uses MathPlayer to do the
rendering. An alternative is MathJax which is used by
<span class = 'pkg'> org-babel.</span> MathJax is supported by a number of
scientific societies and is sponsored by the American Mathematical Society
and the Society for Industrial and Applied Mathematics:
see <a href = 'http://www.mathjax.org/sponsors/'></a>.
MathPlayer does not work reliably in all browsers and may require an
add-on to function. MathJax is preferred for these reasons in extending
the capabilities of <span class = 'pkg'> hwriter</span> in the
<span class = 'pkg'> hwriterPlus</span> package<br/>
<br/>
Here is an inline expression:\(\int_{-\infty}^{1}f(x)dx\),
followed by two displayed expressions, one of which is numbered and
has also been assigned a label.
The first example also has a box around it, by assigning the value
<font face = 'monospace'> "border = '1'"</font> to the argument
<font face = 'monospace'> table.attributes</font>.<br/>
<br/>
<br /><center><table border = '1'><tr bgcolor = 'white'><td align = 'center'>\[\int_{-\infty}^{1}f(x)dx\]</td></tr></table></center><br />
<br /><center><table border = '0' width = '90%'><tr bgcolor = 'white'><td width = '50'>&nbsp;</td><td align = 'center'>\[\{ 26.119 < \sum_{i=1}^n(X_i-\bar{X})^2\}
\bigcup\ \{ 5.629 > \sum_{i=1}^n (X_i-\bar{X})^2 \}.\]</td><td align = 'right' width = '50' id = 'eq:equation1'>(1)</td></tr></table></center><br /><br/>
<h1>Incorporating Images</h1><br/>
Incorporating images is complicated by the inability of
different browsers to display images in different formats.
Firefox will not display <span class ='pkg'>.wmf</span> images for example.
The only scalable image format which can be displayed by all the
common browsers (Internet Explorer, Firefox, Safari and Chrome)
appears to be <span class ='pkg'>.svg</span>,
scalable vector graphics.<br/>
<br/>
Here is a windows metafile, <span class ='pkg'>.wmf</span> image.
Unfortunately this will only display in Internet Explorer (or Microsoft Word),
and there will be no output produced at all if the operating system is not
Microsoft Windows.
The example is the cats data used by Leisch as an Sweave example,
taken from Venables and Ripley (1987).
The data frame contains measurements of heart and body weight
of 144 cats (47 female, 47 male).<br/>
<br/>
A linear regression model of heart weight by sex and gender was
fitted to this data. The graph is a scatter plot of the data including
the regression lines.<br/>
<br/>
<img border="0" src="cats.wmf" alt="cats.wmf"></img><br/>
Here is the cats data plot in svg format.
This uses an extension to hwriter to produce HTML code which enables
display in up to date versions of all common browsers.<br/>
<!--[if !IE]>-->
              <object data = 'cats.svg' type = 'image/svg+xml'
	              width = '600' height = '600'
                      id = catsSVG border = '0'> <!--<![endif]-->
              <!--[if lt IE 9]>
              <object src = 'cats.svg' classid = 'image/svg+xml'
	              width = '600' height = '600'
                      id = catsSVG border = '0'> <![endif]-->
              <!--[if gte IE 9]>
              <object data = 'cats.svg' type = 'image/svg+xml'
	              width = '600' height = '600'
                      id = catsSVG border = '0'> <![endif]-->
              </object><br/>
A further format is png (portable network graphics).
This should display in up to date versions of all common browsers.
It is a bitmap format however so not scalable.<br/>
<img border="0" src="cats.png" alt="cats.png"></img><br/>
One problem with images is that the size of the image displayed
can vary widely from browser to browser. Obtaining the right sized image
for a particular browser may require a lot of trial and error.<br/>
<h1>Vectors, Matrices and Dataframes</h1><br/>
Here is some code producing a character vector<br/>
<pre style = 'font-size:10pt'>form <- y ~ a + b + c
example <- as.character(form)</pre><br/>
This is the result of printing the vector<br/>
<center><table border="1">
<tr>
<td>~</td><td>y</td><td>a + b + c</td></tr>
</table>
</center><br/>
Here is some code producing a numeric vector<br/>
<pre style = 'font-size:10pt'>y <- 3*(1:5)</pre><br/>
This is the result of printing the vector<br/>
<center><table border="1">
<tr>
<td>3</td><td>6</td><td>9</td><td>12</td><td>15</td></tr>
</table>
</center><br/>
Here is some code producing a matrix<br/>
<pre style = 'font-size:10pt'>mdat <- matrix(c(1,2,3, 11,12,13),
               nrow = 2, ncol = 3, byrow = TRUE,
               dimnames = list(c('row1', 'row2'),
                               c('C.1', 'C.2', 'C.3')))</pre><br/>
This is the result of printing the matrix<br/>
<center><table border="1">
<tr>
<td></td><td>C.1</td><td>C.2</td><td>C.3</td></tr>
<tr>
<td>row1</td><td>1</td><td>2</td><td>3</td></tr>
<tr>
<td>row2</td><td>11</td><td>12</td><td>13</td></tr>
</table>
</center><br/>
Here is some code producing a dataframe<br/>
<pre style = 'font-size:10pt'>L3 <- LETTERS[1:3]
d <- data.frame(cbind(x = 1, y = 1:10),
                fac = sample(L3, 10, replace = TRUE))</pre><br/>
This is the result of printing the dataframe<br/>
<center><table border="1">
<tr>
<td>x</td><td>y</td><td>fac</td></tr>
<tr>
<td>1</td><td> 1</td><td>C</td></tr>
<tr>
<td>1</td><td> 2</td><td>A</td></tr>
<tr>
<td>1</td><td> 3</td><td>C</td></tr>
<tr>
<td>1</td><td> 4</td><td>B</td></tr>
<tr>
<td>1</td><td> 5</td><td>C</td></tr>
<tr>
<td>1</td><td> 6</td><td>B</td></tr>
<tr>
<td>1</td><td> 7</td><td>C</td></tr>
<tr>
<td>1</td><td> 8</td><td>A</td></tr>
<tr>
<td>1</td><td> 9</td><td>A</td></tr>
<tr>
<td>1</td><td>10</td><td>B</td></tr>
</table>
</center><br/>
<h2>Tables</h2><br/>
Here is an example taken from the documentation of
<font face='monospace'>xtable</font>. It shows the output of an
ANOVA table.<br/>
<br/>
<center><!-- html table generated in R 2.15.0 by xtable 1.7-1 package -->
<!-- Thu Nov 15 16:36:46 2012 -->
<TABLE border=1>
<TR> <TH>  </TH> <TH> Df </TH> <TH> Sum Sq </TH> <TH> Mean Sq </TH> <TH> F value </TH> <TH> Pr(&gt F) </TH>  </TR>
  <TR> <TD> sex </TD> <TD align="right"> 1 </TD> <TD align="right"> 75.37 </TD> <TD align="right"> 75.37 </TD> <TD align="right"> 0.38 </TD> <TD align="right"> 0.5417 </TD> </TR>
  <TR> <TD> ethnicty </TD> <TD align="right"> 3 </TD> <TD align="right"> 2572.15 </TD> <TD align="right"> 857.38 </TD> <TD align="right"> 4.27 </TD> <TD align="right"> 0.0072 </TD> </TR>
  <TR> <TD> grade </TD> <TD align="right"> 1 </TD> <TD align="right"> 36.31 </TD> <TD align="right"> 36.31 </TD> <TD align="right"> 0.18 </TD> <TD align="right"> 0.6717 </TD> </TR>
  <TR> <TD> disadvg </TD> <TD align="right"> 1 </TD> <TD align="right"> 59.30 </TD> <TD align="right"> 59.30 </TD> <TD align="right"> 0.30 </TD> <TD align="right"> 0.5882 </TD> </TR>
  <TR> <TD> Residuals </TD> <TD align="right"> 93 </TD> <TD align="right"> 18682.87 </TD> <TD align="right"> 200.89 </TD> <TD align="right">  </TD> <TD align="right">  </TD> </TR>
   </TABLE>
</center><br/>
Here is an example taken from the documentation of
<font face='monospace'>table</font>. It shows the output of a
two-dimensional table.<br/>
<br/>
<center><!-- html table generated in R 2.15.0 by xtable 1.7-1 package -->
<!-- Thu Nov 15 16:36:46 2012 -->
<TABLE border=1>
<TR> <TH>  </TH> <TH> Northeast </TH> <TH> South </TH> <TH> North Central </TH> <TH> West </TH>  </TR>
  <TR> <TD align="right"> New England </TD> <TD align="right">   6 </TD> <TD align="right">   0 </TD> <TD align="right">   0 </TD> <TD align="right">   0 </TD> </TR>
  <TR> <TD align="right"> Middle Atlantic </TD> <TD align="right">   3 </TD> <TD align="right">   0 </TD> <TD align="right">   0 </TD> <TD align="right">   0 </TD> </TR>
  <TR> <TD align="right"> South Atlantic </TD> <TD align="right">   0 </TD> <TD align="right">   8 </TD> <TD align="right">   0 </TD> <TD align="right">   0 </TD> </TR>
  <TR> <TD align="right"> East South Central </TD> <TD align="right">   0 </TD> <TD align="right">   4 </TD> <TD align="right">   0 </TD> <TD align="right">   0 </TD> </TR>
  <TR> <TD align="right"> West South Central </TD> <TD align="right">   0 </TD> <TD align="right">   4 </TD> <TD align="right">   0 </TD> <TD align="right">   0 </TD> </TR>
  <TR> <TD align="right"> East North Central </TD> <TD align="right">   0 </TD> <TD align="right">   0 </TD> <TD align="right">   5 </TD> <TD align="right">   0 </TD> </TR>
  <TR> <TD align="right"> West North Central </TD> <TD align="right">   0 </TD> <TD align="right">   0 </TD> <TD align="right">   7 </TD> <TD align="right">   0 </TD> </TR>
  <TR> <TD align="right"> Mountain </TD> <TD align="right">   0 </TD> <TD align="right">   0 </TD> <TD align="right">   0 </TD> <TD align="right">   8 </TD> </TR>
  <TR> <TD align="right"> Pacific </TD> <TD align="right">   0 </TD> <TD align="right">   0 </TD> <TD align="right">   0 </TD> <TD align="right">   5 </TD> </TR>
   </TABLE>
</center><br/>
<h2>R Output</h2>To include output from R in a file, the
command <code>capture.output</code> is used to record the output.
Then the output is included in the HTML file by using the command
<code>hwriteOutput</code>, which is not in the package
 <span class = 'pkg'>hwriter</span>.<br/>
Here is an example from the <code>glm</code> help.<br/>
<pre style = 'font-size:10pt'>aggOut <-
    capture.output(data(iris),
                   str(iris),
                   aggregate(Sepal.Length~Species, iris, mean)
                   )</pre><br/>
This produces the following result.<br/>
<pre style = 'font-size:10pt'>'data.frame':	150 obs. of  5 variables:
 $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
 $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
 $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
 $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
 $ Species     : Factor w/ 3 levels "setosa","versicolor",..: 1 1 1 1 1 1 1 1 1 1 ...
     Species Sepal.Length
1     setosa        5.006
2 versicolor        5.936
3  virginica        6.588</pre><br/>
Note the commas separating the parts of the output to be captured.
See the help and examples for <code>capture.output</code> for details.<br/>
<h2>An R Session</h2>To capture an R session, or part of one, including both commands
and output, the command <code>txtStart</code> from the package
<span class = 'pkg'>TeachingDemos</span> can be used then
<code>hwriteOutput</code>.
This requires writing to a file, and reading the results back
from the file. A temporary file can used for holding the output.
See <code>?tempfile</code>.<br/>
Here is an example.<br/>
<pre style = 'font-size:10pt'>> clotting <- data.frame(u = c(5, 10, 15, 20, 30, 40, 60, 80, 100), 
+ lot1 = c(118, 58, 42, 35, 27, 25, 21, 19, 18), lot2 = c(69, 
+ 
+ 35, 26, 21, 18, 16, 13, 12, 12))
> clotting
    u lot1 lot2
1   5  118   69
2  10   58   35
3  15   42   26
4  20   35   21
5  30   27   18
6  40   25   16
7  60   21   13
8  80   19   12
9 100   18   12
> coef(glm(lot1 ~ log(u), data = clotting, family = Gamma))
(Intercept)      log(u) 
-0.01655438  0.01534311 </pre><br/>
An alternative approach which should not mangle line breaks is provided by the <code>script</code> function written by Ross Ihaka<br/>
<pre style = 'font-size:10pt'>Script started on Thu Nov 15 16:36:46 2012 
> clotting <-
>     data.frame(
>                u = c(5,10,15,20,30,40,60,80,100),
>                lot1 = c(118,58,42,35,27,25,21,19,18),
>                lot2 = c(69,35,26,21,18,16,13,12,12)
>                )
> clotting
    u lot1 lot2
1   5  118   69
2  10   58   35
3  15   42   26
4  20   35   21
5  30   27   18
6  40   25   16
7  60   21   13
8  80   19   12
9 100   18   12
> coef(glm(lot1 ~ log(u), data=clotting, family=Gamma))
(Intercept)      log(u) 
-0.01655438  0.01534311 
> q()
Script done on Thu Nov 15 16:36:46 2012 </pre><br/>
The new function <code>hwriteScript</code> can be used to drop off lines at the beginning and end of the file created by <code>script</code>.<br/>
<pre style = 'font-size:10pt'>> clotting <-
>     data.frame(
>                u = c(5,10,15,20,30,40,60,80,100),
>                lot1 = c(118,58,42,35,27,25,21,19,18),
>                lot2 = c(69,35,26,21,18,16,13,12,12)
>                )
> clotting
    u lot1 lot2
1   5  118   69
2  10   58   35
3  15   42   26
4  20   35   21
5  30   27   18
6  40   25   16
7  60   21   13
8  80   19   12
9 100   18   12
> coef(glm(lot1 ~ log(u), data=clotting, family=Gamma))
(Intercept)      log(u) 
-0.01655438  0.01534311 </pre><br/>
<h2>Creating Links</h2>Since HTML is being produced, it is easy to create links to
other websites. Here is an example of a link to the Statistics Department
website: <a href="http://www.stat.auckland.ac.nz/uoa/">The Department of Statistics.</a><br/>
<br/>
Links may be created within pages using anchors.
Destination anchors in HTML documents may be specified either by the
<font face = 'monospace'>a</font> element (naming it with the
<font face = 'monospace'>name </font> attribute), or by any other
element (naming with the <font face = 'monospace'>id</font> attribute).
Here is a link to the first section created using the
<font face = 'monospace'>a</font> element: <a href="#intro">Entering Text.</a><br/>
<br/>
Here is a link to the third section created by naming with
the <font face = 'monospace'>id</font> attribute: <a href="#mathematics">Rendering Mathematics.</a><br/>
<br/>
This use of named or identified elements of a documents is
how cross-referencing can be implemented.<br/>
<br/>
The numbered equation entered previously can be cross-referenced
using the link argument to <font face = 'monospace'>hwrite</font>.
That equation is equation 1 at present. Here is the link to the equation: <a href="#eq:equation1">Numbered Equation.</a><br/>
We can also retrieve the number of a labeled equation.
For example the numbered equation was the first equation and had the label
"equation1" which in full is "eq:equation1". We can retrieve the number
using <code> which(hwriterEquationList == "eq:equation1")</code>
which produces  1 or more easily using the convenience function <code>eqRef</code>,
using simply <code>eqRef("equation1")</code>.<br/>
<br/>
The graph in SVG format included previously can also be
cross-referenced since it was assigned an identifier using the
<font face = 'monospace'>id</font> attribute.
Here is a link to that graph: <a href="#catsSVG">Graph in SVG format.</a><br/>
<br/>

<br/><br/><font size="-2">(Page generated on Thu Nov 15 16:36:46 2012 by <a href="http://www.embl.de/~gpau/hwriter/index.html">hwriter</a> 1.3)</font><br/>
</body></html>
